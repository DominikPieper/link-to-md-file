# ReadItLater Plugin for Obsidian

## Table of contents

- [Introduction](#introduction)
- [Content Types](#content-types)
    - [Youtube](#youtube)
    - [Vimeo](#vimeo)
    - [Bilibili](#bilibili)
    - [Twitter](#twitter)
    - [Stack Exchange](#stack-exchange)
    - [Mastodon](#mastodon)
    - [TikTok](#tiktok)
    - [Website URL](#website-url)
    - [Text Snippet](#text-snippet)

## Introduction

Save the web with ReadItLater plugin for Obsidian. Archive web pages for reading later, referencing in your second brain or for other flexible use case Obsidian provides.

ReadItLater can do a lot more than converting web pages to markdown. For every content type there is specific template with carefully selected variables to ease up your archiving process.

To add something to your vault just click the `ReadItLater: Save clipboard` ribbon or run the `ReadItLater: Save clipboard` command. New note will be created in folder configured in plugin settings.

## Template engine

ReadItLater provides for every content type dedicated template that can be edited in plugin settings.

### Variables

Variables are rendered in template using familiar syntax `{{content}}`. Nested data types can be accessed using dot notation `{{author.name}}`.

### Filters

Variables output can be modified using filters. Filters are separated by `|` symbol. Filters can be chained, so output of the previous is passed to the next.

<details>
<summary>capitalize</summary>
Modifies first character to uppercase and others to lowercase.
</details>

<details>
<summary>lower</summary>
Converts value to lowercase.
</details>

<details>
<summary>upper</summary>
Converts value to uppercase.
</details>

## Content Types

Structure of note content is determined by URL. Currenty plugin supports saving content of websites and embedding content from multiple services. Each content type has title and note template with replacable variables, which can be edited in plugin settings.

Available content types are ordered by URL detection priority.

### Youtube

Will be converted to note with embeded player in `<iframe>`.

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %title%                 | Schema.org markup                           |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %videoTitle%              | Schema.org markup                           |
| %date%                    | Current date in format from plugin settings |
| %videoURL%                | URL in clipboard                            |
| %videoId%                 | Schema.org markup                           |
| %videoPlayer%             | Embeded player generated by plugin          |
| %channelId%               | Schema.org markup                           |
| %channelName%             | Schema.org markup                           |
| %channelURL%              | Schema.org markup                           |
| %videoThumbnail%          | OpenGraph markup                            |

Because of HTML DOM parsing limitations, additional data can be fetched only from [Google API](https://developers.google.com/youtube/v3/getting-started). If API key is provided, these additional template variables are available.

| Content template variable | Retrieved from      |
| ------------------------- | ------------------- |
| %videoDescription%        | Google API response |
| %videoDuration%           | Google API response |
| %videoDurationFormatted%  | Google API response |
| %videoPublishDate%        | Google API response |
| %videoTags%               | Google API response |
| %videoViewsCount%         | Google API response |

### Vimeo

Will be converted to note with embeded player in `<iframe>`.

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %title%                 | Schema.org markup                           |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %videoTitle%              | Schema.org markup                           |
| %date%                    | Current date in format from plugin settings |
| %videoURL%                | URL in clipboard                            |
| %videoId%                 | Schema.org markup                           |
| %videoPlayer%             | Embeded player generated by plugin          |
| %channelName%             | Schema.org markup                           |
| %channelURL%              | Schema.org markup                           |

### Bilibili

Will be converted to note with embeded player in `<iframe>`.

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %title%                 | `<meta name="og:title">` HTML element       |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %videoTitle%              | `<meta name="og:title">` HTML element       |
| %date%                    | Current date in format from plugin settings |
| %videoURL%                | URL in clipboard                            |
| %videoId%                 | URL in clipboard                            |
| %videoPlayer%             | Embeded player generated by plugin          |

### Twitter

Will be converted to markdown note with data from [Twitter Publish API](https://publish.twitter.com/)

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %tweetAuthorName%       | Twitter Publish API                         |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %tweetAuthorName%         | Twitter Publish API                         |
| %date%                    | Current date in format from plugin settings |
| %tweetURL%                | Twitter Publish API                         |
| %tweetContent%            | Twitter Publish API                         |
| %tweetPublishDate%        | Twitter Publish API                         |

### Stack Exchange

Will be converted to markdown with parsed question and answers from DOM.

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %title%                 | HTML element                                |
| %date%                  | Current date in format from plugin settings |

***Note template variables***

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %date%                    | Current date in format from plugin settings |
| %questionTitle%           | HTML element                                |
| %questionURL%             | HTML element                                |
| %questionContent%         | HTML element                                |
| %authorName%              | HTML element                                |
| %authorProfileURL         | HTML element                                |
| %topAnswer%               | HTML element                                |
| %answers%                 | HTML elements                               |

***Partial answer template variables***

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %date%                    | Current date in format from plugin settings |
| %answerContent%           | HTML element                                |
| %authorName%              | HTML element                                |
| %authorProfileURL         | HTML element                                |

### Mastodon

Will be converted to markdown note with retrieved from [API](https://docs.joinmastodon.org/methods/statuses/#get)

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %tootAuthorName%        | Mastodon API                                |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %tootAuthorName%          | Mastodon API                                |
| %date%                    | Current date in format from plugin settings |
| %tootURL%                 | Mastodon API                                |
| %tootContent%             | Mastodon API                                |

You can enable savig of toot's replies or whole thread.

| Reply template variable   | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %tootAuthorName%          | Mastodon API                                |
| %tootURL%                 | Mastodon API                                |
| %tootContent%             | Mastodon API                                |

### TikTok

Will be converted to note with embeded player in `<iframe>`.

| Title template variable | Retrieved from                              |
| ----------------------- | ------------------------------------------- |
| %authorName%            | OpenGraph markup                            |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %videoDescription%        | OpenGraph markup                            |
| %date%                    | Current date in format from plugin settings |
| %videoURL%                | OpenGraph markup or URL from clipboard      |
| %videoId%                 | Video URL                                   |
| %videoPlayer%             | Embeded player generated by plugin          |
| %authorName%              | OpenGraph markup                            |
| %authorURL%               | OpenGraph markup                            |

### Website URL

Will be parsed to readable form using [Mozilla Readability](https://github.com/mozilla/readability) and then converted to markdown. In case website content is marked by [Readbility](https://github.com/mozilla/readability) as not readable, empty note with URL will be created.

If enabled, images will be downloaded to folder (default is `ReadItLater Inbox/assets`) configured in plugin settings. (Supported only on desktop for now)

| Title template variable | Retrieved from                              |
| ------------------------| ------------------------------------------- |
| %title%                 | `<title>` HTML element                      |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                                                                                                                                                     |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| %articleTitle%            | `<title>` HTML element                                                                                                                                             |
| %articleURL%              | URL from clipboard                                                                                                                                                 |
| %articleReadingTime%      | Estimated reading time                                                                                                                                             |
| %articleContent%          | Parsed `<body>` HTML element                                                                                                                                       |
| %date%                    | Current date in format from plugin settings                                                                                                                        |
| %previewURL%              | Extracted from [OpenGraph](https://ogp.me/) or [Twitter](https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup) image `<meta>` property |
| %publishedTime%           | Extracted from [OpenGraph](https://ogp.me/) `<meta>` property or [Schema.org](https://schema.org/) JSON                                                            |

### Text Snippet

Will be created as new note with whole clipboard content.

| Title template variable | Retrieved from                              |
| ------------------------| ------------------------------------------- |
| %date%                  | Current date in format from plugin settings |

| Content template variable | Retrieved from                              |
| ------------------------- | ------------------------------------------- |
| %content%                 | Clipboard                                   |
| %date%                    | Current date in format from plugin settings |
